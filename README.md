# WEB4_5_GAEPPADAK_BE

### ê¼¬ë¼ì˜¤(KKokkio) - ë‰´ìŠ¤ ì†ë³´ ë° íŠ¸ë Œë“œ ì•Œë¦¼ ì„œë¹„ìŠ¤

> Programmers ë°±ì—”ë“œ ë°ë¸Œì½”ìŠ¤ 4ê¸° 5íšŒì°¨ 4íŒ€ **ìµœì¢… í”„ë¡œì íŠ¸** <br> _Real-time multi-source trend aggregation & summarization platform_

<br>

---

## ğŸ‘¥ Team Introduction

| <img src="https://avatars.githubusercontent.com/u/84301295?v=4" width="100"> | <img src="https://avatars.githubusercontent.com/u/69628269?v=4" width="100"> | <img src="https://avatars.githubusercontent.com/u/15260002?v=4" width="100"> | <img src="https://avatars.githubusercontent.com/u/78626811?v=4" width="100"> | <img src="https://avatars.githubusercontent.com/u/70743878?v=4" width="100"> | <img src="https://avatars.githubusercontent.com/u/115456416?v=4" width="100"> |
| :--------------------------------------------------------------------------: | :--------------------------------------------------------------------------: | :--------------------------------------------------------------------------: | :--------------------------------------------------------------------------: | :--------------------------------------------------------------------------: | :---------------------------------------------------------------------------: |
|   ì´í•˜ì€ <br> [haeun9988](https://github.com/haeun9988) <br> Product Owner   |  ì´í™”ì˜ <br> [2hwayoung](https://github.com/2hwayoung) <br> Backend Leader   |          ê¹€ê²½ë˜ <br> [godaos](https://github.com/godaos) <br> ë¹„ê³            |          ê¹€í•˜ì—° <br> [xaxeon](https://github.com/xaxeon) <br> ë¹„ê³            |  ì´íƒœê²½ <br> [dlfjsld1](https://github.com/dlfjsld1) <br> AWS Administrator  |       ìœ¤ìƒë¯¼ <br> [skvhffpdyd](https://github.com/skvhffpdyd) <br> ë¹„ê³        |

<br>

---

## ğŸ“Š Project Overview

### í”„ë¡œì íŠ¸ ì´ë¦„: **ê¼¬ë¼ì˜¤(KKokkio)**

ë‹¤ì–‘í•œ ë‰´ìŠ¤ ì±„ë„ì˜ ì‹¤ì‹œê°„ ì†ë³´ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ê¸‰ìƒìŠ¹ íŠ¸ë Œë“œ í‚¤ì›Œë“œì™€ ì£¼ìš” ì´ìŠˆë¥¼ íƒì§€í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì—¬ë¡ ì˜ íë¦„ì„ ì‹œê°í™”í•˜ê³  ìš”ì•½Â·ì•Œë¦¼ì„ ì œê³µí•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### ê¸°íš ì˜ë„

ì•Œê³ ë¦¬ì¦˜ ê¸°ë°˜ ê°œì¸í™” ì„œë¹„ìŠ¤ë¡œ ì¸í•œ **í™•ì¦ í¸í–¥(Confirmation Bias**)ê³¼ **ì—ì½”ì±”ë²„(Echo Chamber)** í˜„ìƒì„ ì™„í™”í•˜ê¸° ìœ„í•´, â€œë§ì€ ì‚¬ëŒì´ ë™ì‹œì— ì£¼ëª©í•˜ëŠ” ì´ìŠˆâ€ì— ê¸°ë°˜í•œ ë‰´ìŠ¤ë¥¼ ê· í˜• ìˆê²Œ ë…¸ì¶œí•©ë‹ˆë‹¤.

- ì‹¤ì‹œê°„ ì¸ê¸° ê²€ìƒ‰ì–´ ê¸°ë°˜ìœ¼ë¡œ í˜„ì¬ ì‚¬íšŒì  ê´€ì‹¬ì‚¬ë¥¼ í•œëˆˆì— íŒŒì•…
- ê°œì¸í™” ì¶”ì²œì˜ í¸í–¥ì„ ì¤„ì´ê³ , ë‹¤ì–‘í•œ ê´€ì ì˜ ì •ë³´ë¥¼ íƒìƒ‰í•˜ë„ë¡ ìœ ë„
- SNS(ì¸ìŠ¤íƒ€Â·ìœ íŠœë¸Œ ìˆí¼ ë“±) í™•ì¥ ê°€ëŠ¥ì„±ì„ ê³ ë ¤í•œ í‚¤ì›Œë“œ ì¤‘ì‹¬ ì„¤ê³„

### ê¸°ìˆ ì  ëª©í‘œ

> **â€œì‹¤ì‹œê°„ ëŒ€ìš©ëŸ‰ ì™¸ë¶€ ë°ì´í„°ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ìˆ˜ì§‘Â·ê°€ê³µÂ·ì „ë‹¬í•˜ëŠ” ë°±ì—”ë“œ íŒŒì´í”„ë¼ì¸ êµ¬ì¶•â€**
>
> - Google TrendsÂ·NewsAPIÂ·YouTube API ë“± ì‹¤ì‹œê°„ ì™¸ë¶€ ë°ì´í„° ì—°ë™
> - Spring Batch ìŠ¤ì¼€ì¤„ë§ì„ í™œìš©í•´ ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš° ìë™í™”
> - LLM(GeminiÂ·chatGPTÂ·Claude) í™œìš© AI ìš”ì•½ ê¸°ëŠ¥ ë‚´ì¬í™”

<br>

---

## ğŸš€ í•µì‹¬ ê¸°ëŠ¥ (Key Features)

| ê¸°ëŠ¥                      | ì„¤ëª…                                                                |
| ------------------------- | ------------------------------------------------------------------- |
| ğŸ”‘ **ì‹¤ì‹œê°„ í‚¤ì›Œë“œ ìˆ˜ì§‘** | Google Trends RSSì—ì„œ ë§¤ì‹œê°„ ì¸ê¸° í‚¤ì›Œë“œ Top-10 ìˆ˜ì§‘                |
| ğŸ“º **ì—°ê´€ ì¶œì²˜ ë§¤ì¹­**     | Naver News & YouTube APIë¡œ ë‰´ìŠ¤Â·ì˜ìƒ 10ê±´ì”© ì—°ê²°                    |
| ğŸ“° **AI í¬ìŠ¤íŠ¸ ìƒì„±**     | ê° í‚¤ì›Œë“œì— ëŒ€í•´ Gemini / chatGPT / Claude ë¡œ ìš”ì•½ í¬ìŠ¤íŠ¸ ìë™ ì‘ì„± |
| ğŸ’¬ **ëŒ“ê¸€ & ë¦¬ì•¡ì…˜**      | ë¡œê·¸ì¸ ì‚¬ìš©ìì˜ ëŒ“ê¸€ CRUD, ì¢‹ì•„ìš”, ì‹ ê³                              |
| ğŸ›  **ê´€ë¦¬ì RBAC**         | íšŒì›Â·í¬ìŠ¤íŠ¸Â·ëŒ“ê¸€Â·ì‹ ê³  í†µí•© ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ                            |

<br>

---

## ğŸŒ ì„œë¹„ìŠ¤ ì ‘ì† ì£¼ì†Œ (Endpoints)

### ê¼¬ë¼ì˜¤ ì›¹ì‚¬ì´íŠ¸: https://web.kkokkio.site/

> ì•„ë˜ëŠ” ë°°í¬ëœ ë°±ì—”ë“œ ì„œë²„ì˜ ì ‘ì† ì£¼ì†Œì…ë‹ˆë‹¤.
>
> | í™˜ê²½     | API Base URL                      | Swagger UI                                              |
> | -------- | --------------------------------- | ------------------------------------------------------- |
> | **ê°œë°œ** | `https://api.deploy.kkokkio.site` | `https://api.deploy.kkokkio.site/swagger-ui/index.html` |
> | **ìš´ì˜** | `https://api.prd.kkokkio.site`    | `https://api.prd.kkokkio.site/swagger-ui/index.html`    |

<br>

---

## ğŸ› ï¸ Technology Stack

### ğŸ–¥ï¸ Backend & Infra

| Layer          | Stack & Version                                                   |
| -------------- | ----------------------------------------------------------------- |
| **Language**   | Java 21                                                           |
| **Framework**  | Spring Boot 3.4 Â· Spring Batch 5.2 Â· Spring Data JPA 3.4          |
| **Data**       | MySQL 8.0 Â· Redis 8                                               |
| **Monitoring** | Micrometer 1.14 Â· Prometheus 3.4 Â· Grafana 12                     |
| **CI/CD**      | GitHub Actions Â· Docker 28 Â· AWS ECR & RDS Â· NGINX Â· Flyway 10.20 |
| **Secrets**    | Doppler CLI                                                       |
| **IaC**        | Terraform 1.11                                                    |
| **Docs**       | Swagger 3.1                                                       |

### ğŸ¨ Frontend

| Layer         | Stack & Version                                                                                                                         |
| ------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| **Framework** | Next.js 15                                                                                                                              |
| **Language**  | TypeScript 5.8                                                                                                                          |
| **WireFrame** | [FigZam ë§í¬ ë°”ë¡œê°€ê¸°](https://www.figma.com/board/T9dM5oVh1Gox1FVbHDyriL/%EA%B0%9C%EB%B9%A0%EB%8B%AD?node-id=0-1&t=KBHz7octPCnhTELP-1) |

### ğŸ“¶ Open APIs & External Services

| Service           | Version / Notes             |
| ----------------- | --------------------------- |
| Google Trends RSS | -                           |
| Naver News API    | v1/search                   |
| YouTube Data API  | v3/search                   |
| ChatGPT LLM       | gpt-4o-mini(2024-07-18)     |
| Google Gemini LLM | gemini-2.0-flash            |
| Claude LLM        | claude-3-haiku-(2024-03-07) |

### ğŸ›  Dev & Collaboration Tools

| Tool          | Notes                                                                                           |
| ------------- | ----------------------------------------------------------------------------------------------- |
| IntelliJ IDEA | 2024.1 Ultimate                                                                                 |
| Gradle        | 8.14                                                                                            |
| GitHub        | -                                                                                               |
| Notion        | [Notion í˜ì´ì§€ ë°”ë¡œ ê°€ê¸°](https://www.notion.so/Team-04-1db3550b7b5580849242c1cd0985e39c?pvs=4) |
| Slack         | -                                                                                               |
| Discord       | -                                                                                               |
| Zep           | -                                                                                               |
| Google Meet   | -                                                                                               |

<br>

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)

![image](https://github.com/user-attachments/assets/ab8aac7a-ee14-4a5a-a7eb-1fb01c4d61b0)

<br>

---

## ğŸ›  ë°ì´í„° íŒŒì´í”„ë¼ì¸ (Data Pipeline)

```mermaid
flowchart LR
		    S1[Step 1: Google RSS ìˆ˜ì§‘]
		    S1 --> SPL{{ì™¸ë¶€ ì¶œì²˜ ìˆ˜ì§‘}}
		    SPL --> N1[Step 2-1: Naver News ìˆ˜ì§‘]
		    SPL --> V1[Step 2-2: YouTube ìˆ˜ì§‘]
		    N1 --> S3[Step 3: ì‹ ê·œì„± í‰ê°€]
		    V1 --> S3
		    S3 --> DEC{{ìŠ¤í‚µ ì—¬ë¶€}}
		    DEC -- SKIP_POST --> S6[END]
		    DEC -- CONTINUE --> S4[Step 4: LLM í¬ìŠ¤íŠ¸ ìƒì„±]
		    S4 --> S5[Step 5: ì‹ ê·œ í¬ìŠ¤íŠ¸ Redis Cache]
		    S5 --> S6
```

### ğŸ“‘ ìš”ì•½ í…Œì´ë¸”

| ë‹¨ê³„                         | ê¸°ìˆ                   | ì£¼ìš” ì‘ì—…                         | Metrics                         |
| ---------------------------- | --------------------- | --------------------------------- | ------------------------------- |
| **1. fetchTrendingKeywords** | Google Trend RSS      | RSS íŒŒì‹± í›„ Top10 í‚¤ì›Œë“œ ìˆ˜ì§‘     | -                               |
| **2. searchSources**         | NewsAPI/YouTube API   | ë¹„ë™ê¸° ë³‘ë ¬ í˜¸ì¶œë¡œ ë‰´ìŠ¤Â·ì˜ìƒ ìˆ˜ì§‘ | `fetched_total`, `failed_total` |
| **3. evaluateNovelty**       | Spring Batch Decider  | ì¤‘ë³µÂ·ì €ë³€ë™ í‚¤ì›Œë“œ í•„í„°ë§         | `novelty_lowvar_total`          |
| **4. generatePost**          | Gemini/chatGPT/Claude | í”„ë¡¬í”„íŠ¸ â†’ LLM ìš”ì•½ë¬¸ ìƒì„±        | `post_added_total`              |
| **5. cachePost**             | Redis                 | Hot-Post ìºì‹œ ì ì¬                | `post_cached_total`             |

### ëª¨ë‹ˆí„°ë§ (Grafana)

> Grafana dashboard í…œí”Œë¦¿ì€ [`infra/grafana/dashboard/batch.json`](infra/grafana/dashboard/batch.json) ì°¸ì¡° .

![image](https://github.com/user-attachments/assets/accff231-b04a-40de-bf7d-e214846b41d7)

<br>

---

## ERD

![image](https://github.com/user-attachments/assets/d521071e-82ab-447c-b1c0-ccb9da0aa90f)

<br>

---

## ğŸ› ï¸ ê°œë°œ í™˜ê²½ ì„¤ì • (Development Setup)

**1ï¸âƒ£ Clone the Repository**

```bash
git clone https://github.com/prgrms-web-devcourse-final-project/WEB4_5_GAEPPADAK_BE.git
```

**2ï¸âƒ£ Environment Variables (.env) Setup**
âœ… Using Doppler (Recommended)

> DopplerëŠ” .env í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.
> í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” backendì™€ infra ë‘ í´ë” ì•ˆì—ì„œ Dopplerë¥¼ ì‚¬ìš©í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  
> ì²˜ìŒ ì‹¤í–‰í•˜ëŠ” ê²½ìš°, doppler setupìœ¼ë¡œ ì„¤ì •í•  í”„ë¡œì íŠ¸ì™€ í™˜ê²½ì„ ë¨¼ì € ì„ íƒí•´ ì£¼ì„¸ìš”.

```bash
# Doppler CLI ì„¤ì¹˜ (macOS)
brew install dopplerhq/cli/doppler

# Login & Setup
doppler login
doppler setup # doppler.yaml ë¡œ ìë™ ì„¤ì •

# Run with environment loaded
npm run doppler
```

**3ï¸âƒ£ Run Server & Database**

```bash
# Docker Compose ë¡œ MySQL Â· Redis Â· Prometheus Â· Grafana ë“± ì‹¤í–‰
npm run docker

# Spring Boot (Local profile)
./gradlew bootRun -Pprofile=local

# Reset Containers
npm run docker:reset

# Monitor logs (logs are mapped locally)
tail -f ./infra/mysql_logs/general.log
```

Swagger Docs: [http://localhost:8080/swagger-ui/index.html](http://localhost:8080/swagger-ui/index.html)

**4ï¸âƒ£ Generate Test Coverage Report**
âœ…JaCoCoë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

```bash
# ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰ í›„ HTML í˜•ì‹ì˜ ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±
# /backend ê²½ë¡œì—ì„œ ì‹¤í–‰
./gradlew jacocoTestReport  # ê²°ê³¼: build/jacocoHtml/index.html

```

<br>

---

## ğŸšš ë°°í¬ (Deployment)

### CI/CD ì›Œí¬í”Œë¡œìš°

![image](https://github.com/user-attachments/assets/46a5bae5-a8dc-449d-a123-d25eff17b900)

1. **Pull Request**

   - `gradle test` ì‹¤í–‰
   - JaCoCo ì»¤ë²„ë¦¬ì§€ ì²´í¬ (> 70%)

2. **`develop` / `main` ë¸Œëœì¹˜ ë¨¸ì§€**

   - GitHub Actions `deploy-common.yml` ì›Œí¬í”Œë¡œìš° í˜¸ì¶œ
   - **get-instance-id**

     - AWS ìê²©ì¦ëª… ì„¤ì •
     - íƒœê·¸(`Name=team04-kkokkio`, `env=${{ inputs.instance_env }}`) ê¸°ì¤€ìœ¼ë¡œ EC2 ì¸ìŠ¤í„´ìŠ¤ ID ì¡°íšŒ

   - **flyway-validate**

     - SSH í„°ë„(â„¹ï¸ Dopplerì—ì„œ ë°›ì€ Bastion ì •ë³´ + `ssh-agent`)
     - `redgate/flyway:11` ì»¨í…Œì´ë„ˆë¡œ RDS ë§ˆì´ê·¸ë ˆì´ì…˜ ê²€ì¦(validate & info)

   - **makeTagAndRelease**

     - `mathieudutour/github-tag-action`ë¡œ íƒœê·¸ ìƒì„± (`${{ inputs.tag_prefix }}`)
     - `actions/create-release`ë¡œ GitHub Release ë°œí–‰

   - **buildImageAndPush**

     - Docker Buildx ì„¤ì¹˜ â†’ GHCR ë¡œê·¸ì¸
     - `docker/build-push-action`ë¡œ ì´ë¯¸ì§€ ë¹Œë“œ & GHCR í‘¸ì‹œ
     - íƒœê·¸: `ghcr.io/{owner}/{repo}:${{ outputs.tag_name }}`, `:latest`

   - **deploy**

     - AWS SSM Send-Commandë¥¼ í†µí•´ EC2ì— ì ‘ì†
     - `docker pull` â†’ ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€Â·ì œê±° â†’ `docker run --restart always`

<br>

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ (Testing)

| Layer         | Framework                                 | Notes                   |
| ------------- | ----------------------------------------- | ----------------------- |
| Unit          | JUnit 5 + Mockito 5 (`@MockitoBean`)      | Service & Utility ì§‘ì¤‘  |
| Integration   | SpringBootTest + Testcontainers (MySQL)   | Repository & Controller |
| E2E           | íŒ€ì› QA                                   | ì‹¤ì‚¬ìš©ì í”Œë¡œìš°         |
| Coverage Gate | JaCoCo & Codecov â‰¥ 70% line, â‰¥ 50% branch | CI ì°¨ë‹¨(ì˜ˆì •)           |

<br>

---

## ğŸ“… í”„ë¡œì íŠ¸ ì¼ì • (Project Timeline)

| ê¸°ê°„               | ìŠ¤í”„ë¦°íŠ¸ | ì£¼ìš” ì‚°ì¶œë¬¼                                                      |
| ------------------ | -------- | ---------------------------------------------------------------- |
| 2025â€‘04â€‘28Â ~Â 05â€‘08 | **1ì°¨**  | MVP ì•„í‚¤í…ì²˜, íšŒì›/ì¸ì¦, í‚¤ì›Œë“œ ìˆ˜ì§‘ ìŠ¤ì¼€ì¤„ëŸ¬, ë°°í¬ ìë™í™”       |
| 2025â€‘05â€‘09Â ~Â 05â€‘20 | **2ì°¨**  | LLM í¬ìŠ¤íŠ¸ ìš”ì•½, ê´€ë¦¬ì RBAC, ìŠ¤ì¼€ì¤„ëŸ¬ ê³ ë„í™”, ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ |

<br>

---

## ğŸ¤ ê¸°ì—¬ ê°€ì´ë“œ (Contributing)

1. Issue ìƒì„± â†’ `{tag}/{issueId}-{slug}` ë¸Œëœì¹˜ â†’ PR (Squashâ€‘merge)
2. ë¦¬ë·°ì–´ 3ëª… ì´ìƒ ìŠ¹ì¸ & GitHub Actions âœ… í†µê³¼ í›„ ë³‘í•©

ìì„¸í•œ ì½”ë”© ì»¨ë²¤ì…˜Â·ì»¤ë°‹ ê·œì¹™ì€ [`docs/CONTRIBUTING.md`](docs/CONTRIBUTING.md) ì°¸ì¡° .

<br>

---

## ğŸ“œ ë¼ì´ì„ ìŠ¤ (License)

MIT License Â© 2025 **DevCourse Team â€œê°œë°œì— ë¹ ì§„ ë‹­â€**
